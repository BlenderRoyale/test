<div class="bubble-contact-app">
    <div class="bc-sidebar">
        <div class="bc-header">
            <div style="display: flex; align-items: center; gap: 12px;">
                <svg class="bc-icon" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"
                    xmlns="http://www.w3.org/2000/svg" style="width: 26px; height: 26px;">
                    <circle cx="15" cy="15" r="5"></circle>
                    <circle cx="9" cy="9" r="4"></circle>
                    <circle cx="16" cy="6" r="3"></circle>
                </svg>
                <h2>Bubbles</h2>
            </div>
            <div style="display: flex; align-items: center; gap: 8px;">
                <button class="bc-header-circle-btn bc-header-bubble-btn" id="bc-btn-add-bubble-sidebar"
                    title="Create Bubble Group">
                    <svg width="18" height="18" viewBox="-2 -2 28 28" fill="none" stroke="currentColor" stroke-width="2"
                        style="overflow: visible;">
                        <circle cx="12" cy="12" r="10"></circle>
                        <circle cx="12" cy="12" r="4" fill="currentColor" stroke="none"></circle>
                        <circle cx="22" cy="4" r="2.5" fill="currentColor" stroke="none"></circle>
                        <circle cx="20" cy="20" r="1.8" fill="currentColor" stroke="none"></circle>
                    </svg>
                </button>
                <button class="bc-header-circle-btn" id="bc-btn-add-contact-sidebar" title="Add Bubble">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                </button>
            </div>
        </div>

        <div class="bc-search-container">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                style="margin-right: 8px; opacity: 0.5;">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
            <input id="bc-search-input" type="text" placeholder="Search bubbles...">
        </div>

        <div class="bc-groups" id="bc-sidebar-groups">
            <!-- Injected by renderSidebar() -->
        </div>

        <div style="flex-grow: 1;"></div>
        <div class="bc-sidebar-footer" style="display: flex; align-items: center; gap: 12px;">
            <button class="bc-footer-btn" title="Settings" id="bc-btn-settings">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path
                        d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                    </path>
                </svg>
            </button>
        </div>
    </div>
    <div class="bc-main">
        <div class="bc-main-header">
            <div style="display: flex; align-items: center; gap: 12px; height: 40px;">
                <h1 class="bc-main-title" id="bc-main-title" style="margin: 0;">All Bubbles</h1>
            </div>
            <div class="bc-actions">
                <button title="Toggle View" id="bc-toggle-bubble" class="bc-view-toggle-btn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2.5">
                        <circle cx="15" cy="15" r="5"></circle>
                        <circle cx="9" cy="9" r="4"></circle>
                        <circle cx="16" cy="6" r="3"></circle>
                    </svg>
                    <span>BUBBLES</span>
                </button>
                <button class="bc-btn-primary" id="bc-btn-add-group" style="display: none;">+</button>
            </div>
        </div>

        <div class="bc-view-container">
            <div class="bc-list-view" id="bc-list-view">
                <div class="bc-list-header">
                    <div>NAME</div>
                    <div>PHONE</div>
                    <div>EMAIL</div>
                    <div>SOCIALS</div>
                </div>

                <div class="bc-contacts-container" id="bc-contacts-container">
                    <!-- Injected by renderList() -->
                </div>
            </div>

            <div class="bc-secondary-sidebar" id="bc-secondary-sidebar" style="display: none;">
                <div class="bc-sec-header">
                    <div id="bc-sec-header-action" style="flex-grow: 1;"></div>
                    <div style="display: flex; gap: 8px;">
                        <button id="bc-btn-close-sec">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"></line>
                                <line x1="6" y1="6" x2="18" y2="18"></line>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="bc-sec-content" id="bc-sec-list">
                    <!-- Injected contact cards -->
                </div>
            </div>

            <div class="bc-bubble-view" id="bc-bubble-view" style="display: none;">
                <!-- Canvas Filter Toggle -->
                <div id="bc-canvas-filter" class="bc-canvas-filter" title="Filter: All">
                    <svg id="bc-canvas-filter-icon" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <circle cx="8" cy="14" r="5" />
                        <circle cx="16" cy="10" r="5" />
                    </svg>
                </div>

                <!-- Bubble Pop Counter (only visible when pop mode is on) -->
                <div id="bc-pop-counter" class="bc-pop-counter" style="display: none;">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10" />
                        <path d="M8 12l2-3 4 6" />
                    </svg>
                    Pop Count : <span id="bc-pop-count">0</span>
                </div>

                <!-- Background Atmospheric Particles -->
                <div id="bc-bg-particles" style="z-index: 0;"></div>

                <!-- Deep Purple Canvas for Bubble Nodes -->
            </div>
        </div>
    </div>
    <div class="bc-modal-overlay" id="bc-add-group-modal" style="display: none;">
        <div class="bc-modal">
            <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                <h3 class="bc-modal-title" id="bc-group-modal-title" style="margin: 0; font-size: 18px;">CREATE BUBBLE
                </h3>
                <button class="bc-btn-cancel bc-group-edit-only" id="bc-btn-delete-group"
                    style="display: none; color: var(--bc-text-muted); background: rgba(255,255,255,0.05); padding: 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); cursor: pointer; transition: all 0.2s;">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                        <line x1="10" y1="11" x2="10" y2="17"></line>
                        <line x1="14" y1="11" x2="14" y2="17"></line>
                    </svg>
                </button>
            </div>
            <input type="text" class="bc-modal-input" placeholder="Group Name e.g. Family" id="bc-group-name-input">

            <h3 class="bc-modal-title" style="margin-top: 8px;">Bubble Group Colour</h3>
            <div class="bc-color-picker" id="bc-color-picker">
                <div class="bc-color-swatch selected" data-color="var(--bc-color-d)"
                    style="background: var(--bc-color-d)"></div>
                <div class="bc-color-swatch" data-color="var(--bc-color-a)" style="background: var(--bc-color-a)"></div>
                <div class="bc-color-swatch" data-color="var(--bc-color-b)" style="background: var(--bc-color-b)"></div>
                <div class="bc-color-swatch" data-color="var(--bc-color-c)" style="background: var(--bc-color-c)"></div>
                <div class="bc-color-swatch" data-color="var(--bc-color-e)" style="background: var(--bc-color-e)"></div>
                <div class="bc-color-swatch" data-color="transparent"
                    style="background: var(--bc-color-trans); border: 1px solid rgba(255,255,255,0.3);"></div>
            </div>

            <!-- Removed Palette Switcher from here -->

            <h3 class="bc-modal-title bc-group-edit-only" style="margin-top: 8px; display: none;">Group Members</h3>
            <div class="bc-group-edit-only" id="bc-group-members-list"
                style="display: none; max-height: 180px; overflow-y: auto; background: rgba(0,0,0,0.2); border-radius: 6px; padding: 8px; flex-direction: column; gap: 6px; border: 1px solid rgba(255,255,255,0.05);">
                <!-- Checkboxes injected here -->
            </div>

            <div class="bc-modal-actions"
                style="margin-top: 4px; display: flex; justify-content: flex-end; align-items: center; width: 100%;">
                <div style="display: flex; gap: 12px;">
                    <button class="bc-btn-cancel" id="bc-btn-cancel-group">Cancel</button>
                    <button class="bc-btn-create" id="bc-btn-create-group">Create</button>
                </div>
            </div>
        </div>
    </div>

    <div class="bc-modal-overlay" id="bc-add-contact-modal" style="display: none; z-index: 1000;">
        <div class="bc-modal" style="width: 440px; gap: 12px; padding: 20px;">
            <div style="display: flex; align-items: center; gap: 16px; margin-bottom: 24px; position: relative;">
                <div id="bc-new-contact-avatar"
                    style="width: 52px; height: 52px; border-radius: 50%; background: var(--bc-color-a); display: flex; align-items: center; justify-content: center; font-size: 20px; font-weight: bold; color: white;">
                    ?</div>
                <h3 class="bc-modal-title" id="bc-contact-modal-title" style="margin: 0; font-size: 18px;">Add Contact
                </h3>

                <div style="display: flex; gap: 4px; margin-left: auto; align-items: center;">
                    <div id="bc-contact-note-indicator" title="Contains Notes"
                        style="display: none; color: #FFA31A; background: rgba(250, 163, 26, 0.1); padding: 8px; border-radius: 8px; border: 1px solid rgba(250, 163, 26, 0.15);">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
                            <polyline points="14 2 14 8 20 8"></polyline>
                            <line x1="16" y1="13" x2="8" y2="13"></line>
                            <line x1="16" y1="17" x2="8" y2="17"></line>
                            <polyline points="10 9 9 9 8 9"></polyline>
                        </svg>
                    </div>

                    <button class="bc-btn-cancel" id="bc-btn-delete-contact"
                        style="display: none; color: var(--bc-text-muted); background: rgba(255,255,255,0.05); padding: 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.08); cursor: pointer; transition: all 0.2s;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2">
                            </path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    </button>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <div style="position: relative;">
                    <svg style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--bc-text-muted); pointer-events: none;"
                        width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                        <circle cx="12" cy="7" r="4"></circle>
                    </svg>
                    <input type="text" class="bc-modal-input" placeholder="First Name" id="bc-contact-first"
                        style="width: 100%; box-sizing: border-box; padding-left: 34px;">
                </div>
                <div style="position: relative;">
                    <input type="text" class="bc-modal-input" placeholder="Last Name" id="bc-contact-last"
                        style="width: 100%; box-sizing: border-box;">
                </div>
            </div>

            <div style="position: relative;">
                <svg style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--bc-text-muted); pointer-events: none;"
                    width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path
                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                    </path>
                </svg>
                <input type="text" class="bc-modal-input" placeholder="Phone Number" id="bc-contact-phone"
                    style="width: 100%; box-sizing: border-box; padding-left: 34px;">
            </div>

            <div style="position: relative;">
                <svg style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--bc-text-muted); pointer-events: none;"
                    width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                    <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
                <input type="text" class="bc-modal-input" placeholder="Email Address" id="bc-contact-email"
                    style="width: 100%; box-sizing: border-box; padding-left: 34px;">
            </div>

            <h4 style="margin: 4px 0 0 0; font-size: 13px; color: var(--bc-text-muted);">Social Links</h4>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                <div style="position: relative;">
                    <svg style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--bc-text-muted); pointer-events: none;"
                        width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z">
                        </path>
                    </svg>
                    <input type="text" class="bc-modal-input" placeholder="Twitter URL" id="bc-contact-twitter"
                        style="width: 100%; box-sizing: border-box; padding-left: 34px;">
                </div>
                <div style="position: relative;">
                    <svg style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--bc-text-muted); pointer-events: none;"
                        width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z">
                        </path>
                        <rect x="2" y="9" width="4" height="12"></rect>
                        <circle cx="4" cy="4" r="2"></circle>
                    </svg>
                    <input type="text" class="bc-modal-input" placeholder="LinkedIn URL" id="bc-contact-linkedin"
                        style="width: 100%; box-sizing: border-box; padding-left: 34px;">
                </div>
                <div style="position: relative;">
                    <svg style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--bc-text-muted); pointer-events: none;"
                        width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                    <input type="text" class="bc-modal-input" placeholder="Instagram URL" id="bc-contact-instagram"
                        style="width: 100%; box-sizing: border-box; padding-left: 34px;">
                </div>
                <div style="position: relative;">
                    <svg style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--bc-text-muted); pointer-events: none;"
                        width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M22.54 6.42a2.78 2.78 0 0 0-1.94-2C18.88 4 12 4 12 4s-6.88 0-8.6.46a2.78 2.78 0 0 0-1.94 2A29 29 0 0 0 1 11.75a29 29 0 0 0 .46 5.33A2.78 2.78 0 0 0 3.4 19c1.72.46 8.6.46 8.6.46s6.88 0 8.6-.46a2.78 2.78 0 0 0 1.94-2 29 29 0 0 0 .46-5.25 29 29 0 0 0-.46-5.33z">
                        </path>
                        <polygon points="9.75 15.02 15.5 11.75 9.75 8.48 9.75 15.02"></polygon>
                    </svg>
                    <input type="text" class="bc-modal-input" placeholder="YouTube URL" id="bc-contact-youtube"
                        style="width: 100%; box-sizing: border-box; padding-left: 34px;">
                </div>
                <div style="position: relative;">
                    <svg style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--bc-text-muted); pointer-events: none;"
                        width="14" height="14" viewBox="0 0 24 24" fill="currentColor" stroke="none">
                        <path
                            d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z" />
                    </svg>
                    <input type="text" class="bc-modal-input" placeholder="Discord Username" id="bc-contact-whatsapp"
                        style="width: 100%; box-sizing: border-box; padding-left: 34px;">
                </div>
                <div style="position: relative;">
                    <svg style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--bc-text-muted); pointer-events: none;"
                        width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <line x1="2" y1="12" x2="22" y2="12"></line>
                        <path
                            d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
                        </path>
                    </svg>
                    <input type="text" class="bc-modal-input" placeholder="Website URL" id="bc-contact-url"
                        style="width: 100%; box-sizing: border-box; padding-left: 34px;">
                </div>
            </div>

            <h4 style="margin: 4px 0 0 0; font-size: 13px; color: var(--bc-text-muted);">Internal Notes</h4>
            <div style="position: relative;">
                <textarea class="bc-modal-input" placeholder="Enter private notes, observations, or key data..."
                    id="bc-contact-notes"
                    style="width: 100%; box-sizing: border-box; min-height: 56px; resize: vertical; padding: 12px; font-family: inherit; line-height: 1.5;"></textarea>
            </div>

            <h4 style="margin: 4px 0 0 0; font-size: 13px; color: var(--bc-text-muted);">Contact Bubble Colour</h4>
            <div class="bc-color-picker" id="bc-contact-color-picker">
                <div class="bc-color-swatch selected" data-color="var(--bc-color-a)"
                    style="background: var(--bc-color-a)"></div>
                <div class="bc-color-swatch" data-color="var(--bc-color-b)" style="background: var(--bc-color-b)"></div>
                <div class="bc-color-swatch" data-color="var(--bc-color-c)" style="background: var(--bc-color-c)"></div>
                <div class="bc-color-swatch" data-color="var(--bc-color-d)" style="background: var(--bc-color-d)"></div>
                <div class="bc-color-swatch" data-color="var(--bc-color-e)" style="background: var(--bc-color-e)"></div>
                <div class="bc-color-swatch" data-color="transparent"
                    style="background: var(--bc-color-trans); border: 1px solid rgba(255,255,255,0.3);"></div>
            </div>

            <!-- Removed Palette Switcher from here -->

            <div class="bc-modal-actions"
                style="margin-top: 4px; display: flex; justify-content: flex-end; align-items: center; width: 100%;">
                <div style="display: flex; gap: 12px;">
                    <button class="bc-btn-cancel" id="bc-btn-cancel-contact">Cancel</button>
                    <button class="bc-btn-create" id="bc-btn-create-contact" style="background: #3A69F0;">Add
                        Contact</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Island Modal -->
    <div class="bc-modal-overlay" id="bc-settings-modal" style="display: none; z-index: 1100;">
        <div class="bc-modal">
            <div class="bc-modal-header"
                style="padding-bottom: 24px; border-bottom: 1px solid rgba(255,255,255,0.05); margin-bottom: 8px; justify-content: space-between; align-items: center; display: flex;">
                <div style="display: flex; align-items: center; gap: 12px;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round" style="color: var(--bc-accent);">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                        </path>
                    </svg>
                    <h3 class="bc-modal-title" style="margin: 0;">Settings</h3>
                </div>
                <button class="bc-btn-secondary" id="bc-btn-close-settings"
                    style="padding: 8px 16px; font-size: 13px;">Close</button>
            </div>

            <div class="bc-settings-grid">
                <div class="bc-settings-column">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px; opacity: 0.9;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink: 0;">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z">
                            </path>
                        </svg>
                        <h4
                            style="font-size: 11px; color: var(--bc-text-muted); text-transform: uppercase; letter-spacing: 1.5px; margin: 0;">
                            General Settings</h4>
                    </div>

                    <div class="bc-settings-row">
                        <div class="bc-settings-info">
                            <div class="bc-settings-title">WhatsApp Call</div>
                            <div class="bc-settings-desc">Quick call actions via WhatsApp</div>
                        </div>
                        <label class="bc-switch">
                            <input type="checkbox" id="bc-setting-whatsapp-call">
                            <span class="bc-slider"></span>
                        </label>
                    </div>

                    <div class="bc-settings-row">
                        <div class="bc-settings-info">
                            <div class="bc-settings-title">Telegram Chat</div>
                            <div class="bc-settings-desc">Quick chat actions via Telegram</div>
                        </div>
                        <label class="bc-switch">
                            <input type="checkbox" id="bc-setting-telegram-chat">
                            <span class="bc-slider"></span>
                        </label>
                    </div>

                    <div class="bc-settings-row">
                        <div class="bc-settings-info">
                            <div class="bc-settings-title">Start in Bubble View</div>
                            <div class="bc-settings-desc">Keep Bubbles as the default layout</div>
                        </div>
                        <label class="bc-switch">
                            <input type="checkbox" id="bc-setting-start-bubble">
                            <span class="bc-slider"></span>
                        </label>
                    </div>

                    <div class="bc-settings-section" style="margin-top: 32px;">
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px; opacity: 0.9;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"
                                style="flex-shrink: 0; display: block;">
                                <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                                <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                                <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                            </svg>
                            <h4
                                style="font-size: 11px; color: var(--bc-text-muted); text-transform: uppercase; letter-spacing: 1.5px; margin: 0;">
                                Data Management</h4>
                        </div>
                        <div style="display: flex; gap: 12px;">
                            <button class="bc-settings-btn" id="bc-export-data">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="17 8 12 3 7 8"></polyline>
                                    <line x1="12" y1="3" x2="12" y2="15"></line>
                                </svg>
                                Export
                            </button>
                            <button class="bc-settings-btn" id="bc-import-data">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                                    <polyline points="7 10 12 15 17 10"></polyline>
                                    <line x1="12" y1="15" x2="12" y2="3"></line>
                                </svg>
                                Import
                            </button>
                        </div>
                    </div>
                </div>

                <div class="bc-settings-column">
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 16px; opacity: 0.9;">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="flex-shrink: 0;">
                            <path d="M9 3h6v7l4 8H5l4-8V3z"></path>
                            <path d="M9 3h6"></path>
                        </svg>
                        <h4
                            style="font-size: 11px; color: var(--bc-text-muted); text-transform: uppercase; letter-spacing: 1.5px; margin: 0;">
                            Experimental Features</h4>
                    </div>

                    <div class="bc-settings-row"
                        style="flex-direction: column; align-items: stretch; border-bottom: none;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid var(--bc-border);">
                            <div class="bc-settings-info">
                                <div class="bc-settings-title">Animations</div>
                                <div class="bc-settings-desc">Enable global motion and transitions</div>
                            </div>
                            <label class="bc-switch">
                                <input type="checkbox" id="bc-setting-animations">
                                <span class="bc-slider"></span>
                            </label>
                        </div>

                        <div id="bc-animation-sub-settings"
                            style="display: flex; flex-direction: column; padding-left: 24px; opacity: 0.5; pointer-events: none; transition: all 0.3s ease;">
                            <div class="bc-settings-row">
                                <div class="bc-settings-info">
                                    <div class="bc-settings-title">Fluid Motion</div>
                                    <div class="bc-settings-desc">Enable smooth, organic easing profiles</div>
                                </div>
                                <label class="bc-switch">
                                    <input type="checkbox" id="bc-setting-fluid-motion">
                                    <span class="bc-slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="bc-settings-row">
                            <div class="bc-settings-info">
                                <div class="bc-settings-title">Bubble Pop Mode</div>
                                <div class="bc-settings-desc">Atmospheric floating particles (interactive)</div>
                            </div>
                            <label class="bc-switch">
                                <input type="checkbox" id="bc-setting-bg-bubbles">
                                <span class="bc-slider"></span>
                            </label>
                        </div>

                        <div class="bc-settings-row">
                            <div class="bc-settings-info">
                                <div class="bc-settings-title">Bubble Sounds</div>
                                <div class="bc-settings-desc">Play a satisfying pop sound when you burst a bubble</div>
                            </div>
                            <label class="bc-switch">
                                <input type="checkbox" id="bc-setting-bubble-sounds">
                                <span class="bc-slider"></span>
                            </label>
                        </div>

                        <div class="bc-settings-row">
                            <div class="bc-settings-info">
                                <div class="bc-settings-title">Animation SFX</div>
                                <div class="bc-settings-desc">Slimy interaction sounds when dragging bubbles</div>
                            </div>
                            <label class="bc-switch">
                                <input type="checkbox" id="bc-setting-animation-sfx">
                                <span class="bc-slider"></span>
                            </label>
                        </div>
                    </div>

                    <div class="bc-settings-row" style="flex-direction: column; align-items: flex-start; gap: 16px;">
                        <div class="bc-settings-info">
                            <div class="bc-settings-title">Theme Palette</div>
                            <div class="bc-settings-desc">Switch between cinematic Dark (Vibrant) and sharp Lite (Calm)
                                aesthetics. This affects bubbles, typography and the dynamic canvas globally.</div>
                        </div>
                        <div class="bc-palette-selector" id="bc-settings-palette-selector">
                            <div class="bc-palette-option vibrant active" data-theme="vibrant"
                                title="Dark Mode (Vibrant)"></div>
                            <div class="bc-palette-option muted" data-theme="muted" title="Muted (Soft)"
                                style="display: none;"></div>
                            <div class="bc-palette-option calm" data-theme="calm" title="Lite Mode (Calm)"></div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>